<g class="grouped-bar-column" data-for-measure-id="<%= column.measure.measure_id %>">
<% score_label_y = [5, 10, 15, 5, 10, 15 ] %>
  <% column.bars.each_with_index do |bar, index| %>
    <rect data-for-academic-year="<%= bar.academic_year.range %>" x="<%= bar.x_position %>%" y="<%= bar.y_offset %>%" width="<%= column.bar_width %>%" height="<%= bar.bar_height_percentage %>%" fill="<%= bar.color %>" />

    <% if ENV["SCORES"].present?  && ENV["SCORES"].upcase == "SHOW" %>
      <text x="<%= bar.x_position + 3 %>%" y="<%= score_label_y[index] %>%" text-anchor="middle" dominant-baseline="middle">
        <%= bar.average %>
      </text>
    <% end %>
  <% end %>

  <text class="graph-footer" x="<%= column.column_midpoint %>%" y="<%= column.bar_label_height %>%" text-anchor="middle" dominant-baseline="middle" data-grouped-bar-label="<%= column.label %>">
    <%= column.label %>
  </text>

  <% if column.show_irrelevancy_message? %>
  <rect x="<%= column.message_x %>%" y="<%= column.message_y %>%" rx="15" ry="15" width="<%= column.message_width %>%" height="<%= column.message_height %>%" fill="white" stroke="gray" />

    <text x="<%= column.column_midpoint %>%" y="<%= 20 %>%" text-anchor="middle">
      <tspan x="<%= column.column_midpoint %>%" y="29%">measure not</tspan>
      <tspan x="<%= column.column_midpoint %>%" y="34%">based on</tspan>
      <tspan x="<%= column.column_midpoint %>%" y="39%"><%= column.basis %>  surveys </tspan>
    </text>
  <% elsif column.show_insufficient_data_message? %>
  <rect x="<%= column.message_x %>%" y="<%= column.message_y %>%" rx="15" ry="15" width="<%= column.message_width %>%" height="<%= column.message_height %>%" fill="white" stroke="gray" />

    <text x="<%= column.column_midpoint %>%" y="<%= 20 %>%" text-anchor="middle">
      <tspan x="<%= column.column_midpoint %>%" y="29%">survey response</tspan>
      <tspan x="<%= column.column_midpoint %>%" y="34%">rate below 25%</tspan>
    </text>
  <% end %>
</g>
